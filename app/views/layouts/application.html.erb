<!DOCTYPE html>
<html>
  <head>
    <title>CarbonKnight</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all' %>
    <%= javascript_include_tag 'application' %>
  </head>
    <nav class="nav navbar bg-dark">
      <div>
        <a class="navbar-brand" href="/">
          <img src="https://avatars0.githubusercontent.com/u/76964584?s=200&v=4" alt="CarbonKnight" width="40" height="34" class="d-inline-block align-top">
        </a>
      </div>

      <div class="dropdown ml-auto mt-auto">
        <button class="navbar-toggler dropdown-toggle btn-link" type="button" data-toggle="dropdown">Navigation<span class="navbar-toggler-icon"></span></button>
        <ul class="dropdown-menu">
          <% if current_user %>
            <li>
              <a class="dropdown-item" href="/dashboard">Home</a>
            </li>
            <li>
              <a class="dropdown-item" href="/friends">Friends</a>
            </li>
            <li>
              <a class="dropdown-item" href="/car_monthly_mileages/new">Carbon Calculator</a>
            </li>
            <li>
              <a class="dropdown-item" href="/offsets">Offsets</a>
            </li>
            <li>
              <a class="dropdown-item" href="/resources">Resources</a>
            </li>
            <li>
              <a class="dropdown-item" href="/log_out">Log Out</a>
            </li>
          <% else !current_user %>
            <li class='navbar-brand'>
            <a class="dropdown-item" href="/auth/google_oauth2">Log in with Google</a>
          </li>
        <% end %>
      </ul>
    </div>
  </nav>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
  <body>
    <% if !flash.empty? %>
      <div class="row">
        <div class="col-sm-4"></div>
        <div class="col-sm-4">
          <div class="container alert alert-dismissible">
            <% flash.each do |name, msg| %>
              <div class="<%=name%>-flash">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                <p class="text-danger text-center"><%= msg %></p>
              </div>
            <% end %>
          </div>
          <div class="col-sm-4"></div>
        </div>
      </div>
    <% end %>
    <%= yield %>
  </body>
</html>
